# Lab 02 - Create an Azure Availability Set

### Estimated Duration: 30 Minutes

## Overview

You are a Cloud Administrator for Contoso Ltd., tasked with improving the resilience and uptime of critical applications hosted on Azure virtual machines. To ensure these workloads remain operational during planned maintenance or unexpected hardware failures, you will implement an Azure Availability Set. In this lab, you will create and configure an availability set with defined fault domains and update domains, ensuring that virtual machines are distributed across isolated hardware resources. This setup will provide fault tolerance and help meet your organization’s high-availability requirements.

An **Azure Availability Set** is a logical grouping of virtual machines (VMs) in Azure. When you create VMs within an **Availability Set**, the Azure platform distributes the placement of those VMs across the underlying infrastructure. During planned maintenance on the Azure platform, or in the event of an unexpected fault in the underlying hardware/infrastructure, **Availability Sets** ensure that at least one VM remains operational. To learn more about **Azure Availability Sets** [click here.](https://learn.microsoft.com/en-us/azure/virtual-machines/availability-set-overview)

## Lab objective

You will be able to complete the following task:

- Task 1: Create an Azure Availability Set

## Task 1: Create an Azure Availability Set

In this task, you will create an Azure Availability Set to distribute VMs across multiple fault and update domains. This setup helps ensure high availability by minimizing downtime during maintenance or hardware failures.

1. Click on the **Hamburger menu (1)** at the upper left corner of the Azure portal and click on **+ Create a resource (2)**.

    ![](../instructions/images/Lab1-00.png)
   
1. On the **Create a resource** blade, type <copy> **Availability Set (1)** </copy> in the _Search the Marketplace_ search window and select **availability set (2)**.

    ![](../instructions/images/lab1-image2.png)
    
1. Select **Create (1)** drop down and then choose **Availability Set (2)** from the options.

     ![](../instructions/images/Lab1-01.png)

1. Select **Create** under Availibility Set. 

     ![](./images/avmg3.png)
    
1. On the **Basics** tab of **Create availability set**, enter the following information:

      - For **Subscription** field select the **default subscription (1)**.

      - In the **Resource group** field, select the existing resource group named **azvmrg-<inject key="Deployment ID" enableCopy="false"/>**  **(2)** from the dropdown menu.

      - On the **Instance details** section, type <copy>**demolabavaset1 (3)**</copy> in the **Name** field.

      - In the **Region** dropdown menu, select **<inject key="Region" enableCopy="false"/>** **(4)**
      - Verify that **Fault domains (5)** is set to **2**.

         > **Note:** Virtual machines in the same **Fault domain** share a common power source and physical network switch.

      - Verify that **Update domains (6)** is set to **5**.

         > **Note:**  Virtual machines in the same **Update Domain** will be restarted together during planned maintenance. Azure never restarts more than one **Update Domain** at a time.

      - Click on **Review + create (7)** to review the configurations made.

        ![](../instructions/images2/lab2-5.png)
     
1. Click on **Create** to deploy the Availability set.

     ![](../instructions/images2/lab2-6.png)

      >**Note:** You can check the status of the deployment by clicking on the notification (Bell) icon at the top of the page.

1. Wait for the deployment to complete.

    ![](images/Lab1-03.png)

>**Congratulations** on completing the Task! Now, it's time to validate it. Here are the steps:
> - Hit the Validate button for the corresponding task. If you receive a success message, you have successfully validated the lab. 
> - If not, carefully read the error message and retry the step, following the instructions in the lab guide.
> - If you need any assistance, please contact us at cloudlabs-support@spektrasystems.com. 

<validation step="c08da951-00f1-455e-8236-e18bace20c34" />

## Summary

In this lab, you have completed the following:

- Created an Azure Availability Set.

### You have successfully completed the lab. Now, click on **Next >>** from the lower right corner to proceed on to the next lab.

![Launch Azure Portal](../instructions/images2/next.png)
